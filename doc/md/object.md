# object.js

## Objects and arrays operations.

<a name="bbn_top"></a>[bbn.fn.__arrayFromProp__](#arrayFromProp)  
Creates and returns a new array made of the given property's values from the given array of objects.  
[bbn.fn.__autoExtend__](#autoExtend)  
Extends the bbn object by passing the namespace and the object it will merge with.  
[bbn.fn.__clone__](#clone)  
Creates and returns a perfect clone - but different - from the given object.  
[bbn.fn.__compare__](#compare)  
Performs a comparison between two values based on the given operator and returns a boolean.  
[bbn.fn.__compareConditions__](#compareConditions)  
Checks whether the given data object complies or not with the given filter.  
[bbn.fn.__count__](#count)  
Counts the number of objects matching the given filter in the given array.  
[bbn.fn.__diffObj__](#diffObj)  
Returns an object describing the differences for transforming the first given object into the second.  
[bbn.fn.__each__](#each)  
Executes the provided function on each element of the given array.  
[bbn.fn.__extend__](#extend)  
Merges the contents of two or more objects together into the first object.  
[bbn.fn.__extendOut__](#extendOut)  
Returns a new object made of the properties from all the given objects.  
[bbn.fn.__filter__](#filter)  
Returns a new array with only the data matching the given filter.  
[bbn.fn.__filterToConditions__](#filterToConditions)  
Converts the given object 'filter' to a valid format of condition.  
[bbn.fn.__findAll__](#findAll)  
Retrieves all elements of a hierarchical array corresponding to the filter.  
[bbn.fn.__fori__](#fori)  
Executes the provided function on each element of the given array.  
[bbn.fn.__forir__](#forir)  
Executes the provided function on each element of the given array, going backward.  
[bbn.fn.__getField__](#getField)  
Returns the value of the given field (property) from the first object matching the given filter in an array of objects.  
[bbn.fn.__getProperty__](#getProperty)  
Returns the value of the given property from the given object.  
[bbn.fn.__getRow__](#getRow)  
Returns the first object matching the given filter in an array of objects.  
[bbn.fn.__isSame__](#isSame)  
Checks whether the data contained in the given objects is identical.  
[bbn.fn.__iterate__](#iterate)  
Executes the provided function on each property of the given object.  
[bbn.fn.__map__](#map)  
Returns a new array generated by the execution of a function for each item of the given array.  
[bbn.fn.__move__](#move)  
Moves an element to a different position within the given array.  
[bbn.fn.__multiorder__](#multiorder)  
Sorts an array of objects based on a set of properties.  
[bbn.fn.__numProperties__](#numProperties)  
Returns the number of properties contained in the object.  
[bbn.fn.__order__](#order)  
Sorts an array of objects based on the given property.  
[bbn.fn.__pickValue__](#pickValue)  
Returns a random item from the given array.  
[bbn.fn.__removeEmpty__](#removeEmpty)  
Returns a new array, having removed all elements deemed empty from the given array.  
[bbn.fn.__removePrivateProp__](#removePrivateProp)  
Returns an object with the original objects' properties starting with an alphanumeric character.  
[bbn.fn.__search__](#search)  
Retrieves the index of the array's first element corresponding to the given filter.  
[bbn.fn.__shortenObj__](#shortenObj)  
Shortens all the strings contained in the object properties or element in a array.  
[bbn.fn.__sum__](#sum)  
Returns the sum of the given property or function for the array's elements matching the filter.  
[bbn.fn.__toCSV__](#toCSV)  
Returns a CSV string from the given array of arrays or objects.  
[bbn.fn.__unique__](#unique)  
Removes duplicate values from an array.  


### <a name="unique"></a>bbn.fn.unique(arr)

  __Removes duplicate values from an array.__

  Takes an input array and returns a new array without duplicate values.

  * __arr__ _Array_ 

  __Returns__ _Array_ 


```javascript
bbn.fn.unique(["a", "b", "a", "b", "a", "b", "c", "c", "d"]);
// ["a", "b", "c", "d"]
```
[Back to top](#bbn_top)  

### <a name="getProperty"></a>bbn.fn.getProperty(obj, prop)

  __Returns the value of the given property from the given object.__

  Looks for the given property in the given object, accepting dot (.) separator 
for deep property access, and returns its value if found and undefined otherwise.

  * __obj__ _Object_ 
  * __prop__ _String_ 

  __Returns__ _Mixed_ The property's value or undefined


```javascript
bbn.fn.getProperty({a: 1, b: 2}, 'b');
// 2
```


```javascript
bbn.fn.getProperty({a: 1, b: {o: {a: 33, h: 5}}}, 'b.o.a');
// 33
```


```javascript
bbn.fn.getProperty({a: 1, b: {o: {a: 33, h: 5}}}, 'b.h.a');
// undefined
```
[Back to top](#bbn_top)  

### <a name="order"></a>bbn.fn.order(arr, prop, [dir=asc])

  __Sorts an array of objects based on the given property.__

  The resulting array is the same object, the order is based on _compareValues function.

  * __arr__ _Array_ The array to order
  * __prop__ _String_ The property on which the order is based
  * __[dir=asc]__ _String_ The direction of the order (desc or asc by default)

  __Returns__ _Array_ 


```javascript
bbn.fn.order([
  {movie: "Brazil", year: 1985},
  {movie: "Donnie Darko", year: 2001},
  {movie: "Barry Lindon", year: 1976}
], 'year', 'DESC')
// [
//   {movie: "Donnie Darko", year: 2001},
//   {movie: "Brazil", year: 1985},
//   {movie: "Barry Lindon", year: 1976}
// ]
```
[Back to top](#bbn_top)  

### <a name="multiorder"></a>bbn.fn.multiorder(arr, orders)

  __Sorts an array of objects based on a set of properties.__

  The resulting array is the same object, the order is based on _compareValues function
applied for each given properties in orders argument.

  * __arr__ _Array_ The array to order
  * __orders__ _Array|Object_ The properties and directions (asc, desc) to order by

  __Returns__ _Array_ The same array (arr), ordered differently


```javascript
let ar = [
  {movie: "Brazil", year: 1985},
  {movie: "Donnie Darko", year: 2001},
  {movie: "Out of Africa", year: 1985},
  {movie: "Ran", year: 1985},
  {movie: "Back to the future", year: 1985},
  {movie: "Barry Lindon", year: 1976}
];
bbn.fn.multiorder(ar, [
  {field: "year", dir: "desc"},
  {field: "movie", dir: "asc"}
]);
// [
//   {movie: "Donnie Darko", year: 2001},
//   {movie: "Back to the future", year: 1985},
//   {movie: "Brazil", year: 1985},
//   {movie: "Out of Africa", year: 1985},
//   {movie: "Ran", year: 1985},
//   {movie: "Barry Lindon", year: 1976}
// ]
bbn.fn.multiorder(ar, {year: "desc", movie: "asc"});
// Same result with object shortcut
```
[Back to top](#bbn_top)  

### <a name="move"></a>bbn.fn.move(arr, fromIndex, toIndex)

  __Moves an element to a different position within the given array.__

  The same array is returned, with its elements reordered according to the executed movement.

  * __arr__ _Array_ The array
  * __fromIndex__ _Number_ The index of the element to move
  * __toIndex__ _Number_ The future index of the element

  __Returns__ _Array_ The same array, with elements repositionned.


```javascript
bbbn.fn.move([
  {movie: "Brazil", year: 1985},
  {movie: "Donnie Darko", year: 2001},
  {movie: "Out of Africa", year: 1985}
], 1, 2);
// [
//   {movie: "Brazil", year: 1985},
//   {movie: "Out of Africa", year: 1985},
//   {movie: "Donnie Darko", year: 2001}
// ]
```
 @example
```javascript
bbn.fn.move([1, 2, 3, 4], 3, 0);
// [4, 1, 2, 3]
```
[Back to top](#bbn_top)  

### <a name="compare"></a>bbn.fn.compare(v1, v2, operator)

  __Performs a comparison between two values based on the given operator and returns a boolean.__

  It is internally used by all the filtering functions; the available operators are:  
- _===_, _=_, _equal_, _eq_, _is_, which stand for __===__  
- _!==_, _notequal_, _neq_, _isnot_, which stand for __!==__
- _!=_, _different_, which stand for __!=__
- _contains_, _contain_, _icontains_, _icontain_
- _starts_, _start_
- _startswith_, _startsi_, _starti_, _istarts_, _istart_
- _endswith_, _endsi_, _endi_, _iends_, _iend_
- _like_
- _gt_, _>_, which stand for __>__
- _lt_, _<_, which stand for __<__
- _gte_, _>=_, which stand for __>=__
- _lte_, _<=_, which stand for __<=__
- _isnull_, which stands for __=== null__
- _isnotnull_, which stands for __!== null__
- _isempty_, which stands for __=== ''__
- _isnotempty_, which stands for __!== ''__  

The defaut operator (if none is given) is __==__ .

  * __v1__ _String|Number_ 
  * __v2__ _String|Number_ 
  * __operator__ _String_ 

  __Returns__ _Boolean_ True if the values' comparison complies with the operator, false otherwise


```javascript
bbn.fn.compare('foo', 'bar', 'eq');
// false
```


```javascript
bbn.fn.compare('foo', 'bar', 'neq');
// true
```


```javascript
bbn.fn.compare(3, 1, '>');
// true
```


```javascript
bbn.fn.compare("JavaScript", "script", 'contain');
// true
```
[Back to top](#bbn_top)  

### <a name="search"></a>bbn.fn.search(arr, prop, val, operator, startFrom)

  __Retrieves the index of the array's first element corresponding to the given filter.__

  Returns -1 if the element is not found. If the second parameter is an object or function 
for filtering as defined in bbn.fn.filter, the remaining parameters will be shifted to the
left, i.e. val becomes operator, and operator startFrom. And if operator is a number, its value will
be given to startFrom and operator will be undefined. The filter object can be complex with different
operators (as seen in bbn.fn.compare) and logics (AND/OR), and infinitely nested, of this form:
```javascript
{
  logic: "AND",
  conditions: [
    {
      field: "prop1",
      operator: "eq",
      value: "value1"
    }, {
      logic: "OR",
      conditions: [
        {
           field: "prop2",
           operator: "eq",
           value: 1
        }. {
           field: "prop2",
           operator: "eq",
           value: 2
        }
      ]
    }
  ]
}
```
This way of managing the arguments is used in all the filtering functions.

  * __arr__ _Array_ The subject array
  * __prop__ _(String|Object|Function)_ A property's name or a filter object or function
  * __val__ _Mixed_ The value with which comparing the given property
  * __operator__ _String_ The operator to use for comparison with the value as used in bbn.fn.compare
  * __startFrom__ _Number_ The index from which the search should start

  __Returns__ _Number_ The index if found, otherwise -1


```javascript
let ar = [
  {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
  {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
  {name: "Star wars", director: "George Lucas", year: 1977, id: 256},
  {name: "Jaws", director: "Steven Spielberg", year: 1975, id: 423}
];
bbn.fn.search(ar, "id", 256);
// 2
bbn.fn.search(ar, {director: "Steven Spielberg"});
// 0
bbn.fn.search(ar, {year: 1975, director: "Steven Spielberg"});
// 3
bbn.fn.search(ar, {director: "Steven Spielberg"}, 1);
// 3
// Complex filters
bbn.fn.search(ar, {
  logic: "AND",
  conditions: [
    {
      field: "director",
      operator: "eq",
      value: "Steven Spielberg"
    }, {
      logic: "OR",
      conditions: [
        {
           field: "year",
           operator: "eq",
           value: 1974
        }, {
           field: "year",
           operator: "eq",
           value: 1975
        }
      ]
    }
  ]
});
// 3
```
[Back to top](#bbn_top)  

### <a name="count"></a>bbn.fn.count(arr, prop, val, operator)

  __Counts the number of objects matching the given filter in the given array.__

  The arguments follow the same scheme as bbn.fn.search.

  * __arr__ _Array_ The subject array
  * __prop__ _(String|Object|Function)_ A property's name or a filter object or function
  * __val__ _Mixed_ The value with which comparing the given property
  * __operator__ _String_ The operator to use for comparison with the value as used in bbn.fn.compare

  __Returns__ _Number_ The number of items


```javascript
let ar = [
  {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
  {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
  {name: "Star wars", director: "George Lucas", year: 1977, id: 256},
  {name: "Jaws", director: "Steven Spielberg", year: 1975, id: 423}
];
bbn.fn.count(ar, "id", 256);
// 1
bbn.fn.count(ar, {director: "Steven Spielberg"});
// 2
bbn.fn.search(ar, "year", 1975, ">");
// 3
// Complex filters: all the movies from Spielberg between 1974 and 1980
bbn.fn.search(ar, {
  logic: "AND",
  conditions: [
    {
      field: "director",
      operator: "eq",
      value: "Steven Spielberg"
    }, {
      logic: "AND",
      conditions: [
        {
           field: "year",
           operator: ">=",
           value: 1974
        }, {
           field: "year",
           operator: "<=",
           value: 1980
        }
      ]
    }
  ]
});
// 1
```
[Back to top](#bbn_top)  

### <a name="findAll"></a>bbn.fn.findAll(arr, prop, val, operator)

  __Retrieves all elements of a hierarchical array corresponding to the filter.__

  The arguments follow the same scheme as bbn.fn.search.

  * __arr__ _Array_ The subject array
  * __prop__ _(String|Object|Function)_ A property's name or a filter object or function
  * __val__ _Mixed_ The value with which comparing the given property
  * __operator__ _String_ The operator to use for comparison with the value as used in bbn.fn.compare

  __Returns__ _Number_ The number of items


```javascript
let ar = [
  {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
  {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
  {name: "Star wars", director: "George Lucas", year: 1977, id: 256},
  {name: "Jaws", director: "Steven Spielberg", year: 1975, id: 423}
];
bbn.fn.count(ar, "id", 256);
// 1
bbn.fn.count(ar, {director: "Steven Spielberg"});
// 2
bbn.fn.search(ar, "year", 1975, ">");
// 3
// Complex filters: all the movies from Spielberg between 1974 and 1980
bbn.fn.search(ar, {
  logic: "AND",
  conditions: [
    {
      field: "director",
      operator: "eq",
      value: "Steven Spielberg"
    }, {
      logic: "AND",
      conditions: [
        {
           field: "year",
           operator: ">=",
           value: 1974
        }, {
           field: "year",
           operator: "<=",
           value: 1980
        }
      ]
    }
  ]
});
// 1
```
[Back to top](#bbn_top)  

### <a name="sum"></a>bbn.fn.sum(arr, numberProp, prop, val, operator)

  __Returns the sum of the given property or function for the array's elements matching the filter.__

  The filtering arguments follow the same scheme as bbn.fn.search.

  * __arr__ _Array_ The subject array
  * __numberProp__ _(String|Function)_ The property's name for which the value should be added to the sum, or a function returning the number.
  * __prop__ _(String|Object|Function)_ A property's name or a filter object or function
  * __val__ _Mixed_ The value with which comparing the given property
  * __operator__ _String_ The operator to use for comparison with the value as used in bbn.fn.compare

  __Returns__ _Number_ The sum


```javascript
let invited = [
  {name: "Robert De Niro", attendees: 2, confirmed: true},
  {name: "Al Pacino", attendees: 1, confirmed: false},
  {name: "James Caan", attendees: 4, confirmed: false},
  {name: "Harvey Keitel", attendees: 5, confirmed: true}
];
// No filter
bbn.fn.sum(invited, "attendees");
// 12
// Filter
bbn.fn.sum(invited, "attendees", {confirmed: true});
// 7
```


```javascript
let cart = [
   {article: "Toothpaste", price: 2.50, quantity: 1},
   {article: "Toothbrush", price: 6, quantity: 2},
   {article: "Banana", price: 0.50, quantity: 3},
   {article: "T-shirt", price: 14, quantity: 3}
];
bbn.fn.sum(cart, a => a.price * a.quantity);
// 58
// Only the items with a quantity equal to 3
bbn.fn.sum(cart, a => a.price * a.quantity, {quantity: 3});
// 43.5
```
[Back to top](#bbn_top)  

### <a name="filter"></a>bbn.fn.filter(arr, prop, val, operator)

  __Returns a new array with only the data matching the given filter.__

  The filtering arguments follow the same scheme as bbn.fn.search.

  * __arr__ _Array_ The subject array
  * __prop__ _(String|Object|Function)_ A property's name or a filter object or function
  * __val__ _Mixed_ The value with which comparing the given property
  * __operator__ _String_ The operator to use for comparison with the value as used in bbn.fn.compare

  __Returns__ _Array_ A new filtered array


```javascript
let ar = [
  {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
  {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
  {name: "Star wars", director: "George Lucas", year: 1977, id: 256},
  {name: "Jaws", director: "Steven Spielberg", year: 1975, id: 423}
];
bbn.fn.filter(ar, {director: "Steven Spielberg"});
// [
//   {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
//   {name: "Jaws", director: "Steven Spielberg", year: 1975, id: 423}
// ]
bbn.fn.filter(ar, "director", "Steven Spielberg");
// Same result as the previous example
bbn.fn.filter(ar, {
  logic: "OR",
  conditions: [
    {
       field: "director",
       value: "Richard Donner"
    }, {
       field: "director",
       value: "George Lucas"
    }
  ]
);
// [
//   {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
//   {name: "Star wars", director: "George Lucas", year: 1977, id: 256},
// ]
```

[Back to top](#bbn_top)  

### <a name="getRow"></a>bbn.fn.getRow(arr, prop, val, operator)

  __Returns the first object matching the given filter in an array of objects.__

  The filtering arguments follow the same scheme as bbn.fn.search.

  * __arr__ _Array_ The subject array
  * __prop__ _(String|Object|Function)_ A property's name or a filter object or function
  * __val__ _Mixed_ The value with which comparing the given property
  * __operator__ _String_ The operator to use for comparison with the value as used in bbn.fn.compare

  __Returns__ _Object|Boolean_ The item if found, false otherwise


```javascript
let ar = [
  {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
  {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
  {name: "Star wars", director: "George Lucas", year: 1977, id: 256},
  {name: "Jaws", director: "Steven Spielberg", year: 1975, id: 423}
];
bbn.fn.getRow(ar, {director: "Steven Spielberg"});
// {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
bbn.fn.getRow(ar, "director", "Steven Spielberg");
// Same result as the previous example
bbn.fn.getRow(ar, {
  logic: "OR",
  conditions: [
    {
       field: "director",
       value: "Richard Donner"
    }, {
       field: "director",
       value: "George Lucas"
    }
  ]
);
// {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
```
[Back to top](#bbn_top)  

### <a name="getField"></a>bbn.fn.getField(arr, prop, val, operator, field)

  __Returns the value of the given field (property) from the first object matching the given filter in an array of objects.__

  The filtering arguments follow the same scheme as bbn.fn.search.

  * __arr__ _Array_ The subject array
  * __prop__ _(String|Object|Function)_ A property's name or a filter object or function
  * __val__ _Mixed_ The value with which comparing the given property
  * __operator__ _String_ The operator to use for comparison with the value as used in bbn.fn.compare
  * __field__ _String_ The property from which the value is returned

  __Returns__ _undefined_ 


```javascript
let ar = [
  {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589},
  {name: "Goonies", director: "Richard Donner", year: 1985, id: 689},
  {name: "Star wars", director: "George Lucas", year: 1977, id: 256},
  {name: "Jaws", director: "Steven Spielberg", year: 1975, id: 423}
];
bbn.fn.getField(ar, "movie", {id: 256});
// Star wars
bbn.fn.getField(ar, "movie", "id", 689);
// Goonies
```
[Back to top](#bbn_top)  

### <a name="removePrivateProp"></a>bbn.fn.removePrivateProp(obj, deep)

  __Returns an object with the original objects' properties starting with an alphanumeric character.__

  It is presumed that external libraries, bbn variables use prefixes such as _ or $ for
naming private properties; this returns a new object purged from these properties.

  * __obj__ _Object_ The original object
  * __deep__ _Boolean_ If true the function will be reapplied on object properties

  __Returns__ _Object_ A new object without only the _public_ properties.


```javascript
bbn.fn.removePrivateProp({
  _bbn_timestamp: 1587269593987,
  name: "Wonka",
  fname: "Willy"
});
// {name: "Wonka", fname: "Willy"}
```
[Back to top](#bbn_top)  

### <a name="numProperties"></a>bbn.fn.numProperties(obj)

  __Returns the number of properties contained in the object.__

  Only takes into account the own properties - not the inherited ones - and the non _private_ ones.

  * __obj__ _Object_ The object to analyze

  __Returns__ _Number_ The number of properties


```javascript
bbn.fn.numProperties({author: "Chuck Palahniuk", "title": "Fight club"});
// 2
```


```javascript
bbn.fn.numProperties({username: "chuck", "password": "soap", _bbn_timestamp: 1587323193751});
// 2


```javascript
let d = new Date();
bbn.fn.numProperties(d);
// 0
d.myProp = 1;
bbn.fn.numProperties(d);
// 1
```
[Back to top](#bbn_top)  

### <a name="isSame"></a>bbn.fn.isSame(obj1, obj2)

  __Checks whether the data contained in the given objects is identical.__

  The properties starting with a non alphanumerical character and the 
inherited ones are removed for the comparison, then the properties are 
compared individually without the order being taken into account.

  * __obj1__ _Object_ 
  * __obj2__ _Object_ 

  __Returns__ _Boolean_ 


```javascript
bbn.fn.isSame(
  {name: "Wonka", fname: "Willy"},
  {fname: "Willy", name: "Wonka"}
);
// true
```


```javascript
// Doesn't take into account properties starting with non-alphanumeric characters
bbn.fn.isSame(
  {name: "Wonka", fname: "Willy", _bbn_timestamp: 1587269593987},
  {fname: "Willy", name: "Wonka"}
);
// true
```


```javascript
bbn.fn.isSame(
  {name: "Wonka", fname: "Willy", real: false},
  {fname: "Willy", name: "Wonka"}
);
// false
```
[Back to top](#bbn_top)  

### <a name="filterToConditions"></a>bbn.fn.filterToConditions(filter, operator)

  __Converts the given object 'filter' to a valid format of condition.__

  The resulting format will comply with bbn.fn.compareConditions and also with 
bbn databases functions and complex filters applied to bbn-vue list components.

  * __filter__ _Object_ 
  * __operator__ _String_ 

  __Returns__ _Object_ 


```javascript
bbn.fn.filterToConditions({num: 3});
// {
//   logic: "AND",
//   conditions: [{
//     field: "num",
//     operator: "=",
//     value: 3
//   }]
// }
```


```javascript
bbn.fn.filterToConditions({num: 3}, '>');
// {
//   logic: "AND",
//   conditions: [{
//     field: "num",
//     operator: ">",
//     value: 3
//   }]
// }
```
[Back to top](#bbn_top)  

### <a name="compareConditions"></a>bbn.fn.compareConditions(data, filter)

  __Checks whether the given data object complies or not with the given filter.__

  The filter format must be full (i.e. with the properties logic and conditions) such as
seen in the function bbn.fn.search and can be generated by the function bbn.fn.filterToConditions.

  * __data__ _Object_ 
  * __filter__ _Object_ 

  __Returns__ _Boolean_ 


```javascript
let item = {name: "Raiders of the lost ark", director: "Steven Spielberg", year: 1981, id: 589};
bbn.fn.compareConditions(item, {
  logic: "AND",
  conditions: [
    {
       field: "director",
       value: "Steven Spielberg"
    }
  ]
});
// true
bbn.fn.compareConditions(item, bbn.fn.filterToConditions({director: "Steven Soderberg"}));
// false
bbn.fn.compareConditions(item, bbn.fn.filterToConditions({director: "Steven Spielberg"}));
// true
bbn.fn.compareConditions(item, bbn.fn.filterToConditions({year: 1980}, ">"));
// true
bbn.fn.compareConditions(item, {
  logic: "AND",
  conditions: [
    {
       field: "year",
       operator: "<",
       value: 1980
    }
  ]
});
// false
```
[Back to top](#bbn_top)  

### <a name="extend"></a>bbn.fn.extend()

  __Merges the contents of two or more objects together into the first object.__

  A boolean true argument can be done to operate a deep extend. In this case, 
the content of properties or subproperties arrays and objects will also be merged.


  __Returns__ _Object_ The first object argument, merged with the other objects given


```javascript
bbn.fn.extend(
  {prop1: 10, prop2: 20},
  {prop1: 11, prop3: 21},
  {prop2: 22, prop4: false},
  {prop5: false, prop3: 45}
);
// {prop1: 11, prop2: 22, prop3: 45, prop4: false, prop5: false}
```


```javascript
bbn.fn.extend(
  {
    prop1: [3, 5, 6],
    prop2: {
      subprop1: 87,
      subprop2: 100
    }
  }, {
    prop1: 11,
    prop3: [8, 12, {aProperty: 1, anotherProperty: true}, 26]
  }, {
    prop2: {
      subprop1: 90,
      subprop3: 25
    },
    prop4: false
  }, {
    prop5: false,
    prop3: [8, 45, {anotherProperty: false, andAnother: true}]
  }
);
// {
//   prop1: 11,
//   prop2: {subprop1: 90, subprop3: 25},
//   prop3: [8, 45, {anotherProperty: false, andAnother: true}],
//   prop4: false,
//   prop5: false
// }
```


```javascript
// Deep
bbn.fn.extend(
  true, 
  {
    prop1: [3, 5, 6],
    prop2: {
      subprop1: 87,
      subprop2: 100
    }
  }, {
    prop1: 11,
    prop3: [8, 12, {aProperty: 1, anotherProperty: true}, 26]
  }, {
    prop2: {
      subprop1: 90,
      subprop3: 25
    },
    prop4: false
  }, {
    prop5: false,
    prop3: [8, 45, {anotherProperty: false, andAnother: true}]
  }
);
// {
//   prop1: 11,
//   prop2: {subprop1: 90, subprop3: 25},
//   prop3: [8, 45, {aProperty: 1, anotherProperty: false, andAnother: true}, 26],
//   prop4: false,
//   prop5: false
// }
```
[Back to top](#bbn_top)  

### <a name="extendOut"></a>bbn.fn.extendOut()

  __Returns a new object made of the properties from all the given objects.__

  Compared to bbn.fn.extend this still treats the arguments from left to right 
but without overwriting existing properties, and returning a new object.


  __Returns__ _Object_ 


```javascript
//{field1: 1, field2: 2, field3: 3, items: {item: 0, item1: 1, item2: 2}, field4: 4}
bbn.fn.extendOut({field1: 1, field2: 2, field3: 3, items: {item: 0}}, {field4: 4, items: {item1: 1, item2: 2}});
```
[Back to top](#bbn_top)  

### <a name="autoExtend"></a>bbn.fn.autoExtend(namespace, obj)

  __Extends the bbn object by passing the namespace and the object it will merge with.__

  This function is a self-centric shortcut for adding functions or proerties 
to the bbn object itself.

  * __namespace__ _String_ The bbn property, existing or not, in which the object will be merged
  * __obj__ _Object_ The object to merge

  __Returns__ _undefined_ No return value


```javascript
bbn.fn.autoExtend("fn", {myOwnFunction: () => "Result of my own function"});
bbn.fn.myOwnFunction();
// Result of my own function
```


```javascript
bbn.fn.autoExtend("env", {serverLanguage: "php"});
bbn.env.sercerLanguage
// php
```


```javascript
bbn.fn.autoExtend("myProject", {name: "My Project"});
bbn.myProject.name
// Project
```
[Back to top](#bbn_top)  

### <a name="removeEmpty"></a>bbn.fn.removeEmpty(arr)

  __Returns a new array, having removed all elements deemed empty from the given array.__

  Removes all the elements which are empty, i.e. false, 0, null, '', NaN, or undefined.

  * __arr__ _Array_ 

  __Returns__ _Array_ 


```javascript
bbn.fn.removeEmpty([{prop1: 10, prop2: 20}, '', {}, null, 1, undefined, 0, false, 25]);
// [{prop1: 10, prop2: 20}, 1, 25]
```
[Back to top](#bbn_top)  

### <a name="arrayFromProp"></a>bbn.fn.arrayFromProp(arr, prop)

  __Creates and returns a new array made of the given property's values from the given array of objects.__

  The returned array will always have the same length of the given array, even if the property is not found.

  * __arr__ _Array_ 
  * __prop__ _String_ 

  __Returns__ _Array_ The new array


```javascript
bbn.fn.arrayFromProp([
  {movie: "Brazil", year: 1985},
  {movie: "Donnie Darko", year: 2001},
  {movie: "Barry Lindon", year: 1976}
], "year");
// [1985, 2001, 1976]
```


```javascript
bbn.fn.arrayFromProp([
  {pupil: "Agnes Varda", grade: {year: "B", month: "A"}},
  {pupil: "Jacques Rivette"},
  {pupil: "Luc Besson", grade: {year: "C", month: "D"}},
  {pupil: "Nicole Garcia", grade: {year: "B", month: "B"}}
], "grade.month");
// ["A", undefined, "D", "B"]
```
[Back to top](#bbn_top)  

### <a name="pickValue"></a>bbn.fn.pickValue(arr)

  __Returns a random item from the given array.__

  * __arr__ _Array_ The array to pick from

  __Returns__ _Mixed_ The random value


```javascript
bbn.fn.pickValue([1, 2, 3, 4, 5]);
// 1
bbn.fn.pickValue([1, 2, 3, 4, 5]);
// 5
bbn.fn.pickValue([1, 2, 3, 4, 5]);
// 4
```
[Back to top](#bbn_top)  

### <a name="diffObj"></a>bbn.fn.diffObj(obj1, obj2, unchanged, notRoot)

  __Returns an object describing the differences for transforming the first given object into the second.__

  The returned data will use the objects properties as keys. If unchanged is set to true, all the 
properties will be returned, otherwise only the different ones. Each of these keys will have the 
following properties: 
- type: can be _modified_, _created_, _deleted_, and if unchanged is set to true _unchanged_
- data: the first object's property's value, or the second if type is _created_
- newData: the second object's property's value in case of type _updated_.

  * __obj1__ _Object_ 
  * __obj2__ _Object_ 
  * __unchanged__ _String_ 
  * __notRoot__ _Boolean_ 

  __Returns__ _Object_ 


```javascript
bbn.fn.diffObj(
  {
    name: "Thomas", 
    age: 45
  }, {
    name: "Eva",
    sex: "Female",
    retired: false
  }
);
// {
//   name: {
//     type: "updated",
//     data: "Thomas",
//     newData: "Eva"
//   },
//   age: {
//     type: "deleted",
//     data: 45
//   },
//   sex: {
//     type: "created",
//     data: "Female"
//   },
//   retired: {
//     type: "created",
//     data: false
//   }
// }
```


```javascript
bbn.fn.diffObj(
  {pupil: "Agnes Varda", grade: {year: "B", month: "A"}},
  {pupil: "Luc Besson", grade: {year: "C", month: "D"}}
);
// {
//   "pupil": {
//     "type": "updated",
//     "data": "Agnes Varda",
//     "newData": "Luc Besson"
//   },
//   "grade": {
//     "year": {
//       "type": "updated",
//       "data": "B",
//       "newData": "C"
//     },
//     "month": {
//       "type": "updated",
//       "data": "A",
//       "newData": "D"
//     }
//   }
// }
```
[Back to top](#bbn_top)  

### <a name="fori"></a>bbn.fn.fori(arr, fn, max, min)

  __Executes the provided function on each element of the given array.__

  A minimum and a maximum value can be provided, within the boundaries of the 
array's indexes. Returning false will stop the loop.

  * __arr__ _Array_ The array to loop on
  * __fn__ _Function_ The function, gets the array's element and the index as arguments
  * __max__ _Number_ The index to which the loop will stop
  * __min__ _Number_ The index at which the loop will start

  __Returns__ _undefined_ 


```javascript
let res = 0;
bbn.fn.fori([4, 5, 5, 10, 1, 2], d => {
  res += d;
}, 3);
// res = 24
```


```javascript
let res = 0;
bbn.fn.fori([4, 5, 5, 10, 1, 2], d => {
  if (res >= 20) {
    return false;
  }
  res += d;
}, 4, 1);
// res = 20
```
[Back to top](#bbn_top)  

### <a name="forir"></a>bbn.fn.forir(arr, fn, max, min)

  __Executes the provided function on each element of the given array, going backward.__

  A maximum and a minimum value can be provided, within the boundaries of the 
array's indexes. Returning false will stop the loop.

  * __arr__ _Array_ The array to loop on
  * __fn__ _Function_ The function, gets the array's element and the index as arguments
  * __max__ _Number_ The index to which the loop will stop
  * __min__ _Number_ The index at which the loop will start

  __Returns__ _undefined_ 


```javascript
let res = 0;
bbn.fn.forir([4, 5, 5, 10, 1, 2], d => {
  res += d;
}, 4, 2);
// res = 16
```


```javascript
let res = 0;
bbn.fn.forir([4, 5, 5, 10, 1, 2], d => {
  if (res >= 20) {
    return false;
  }
  res += d;
});
// res = 23
```
[Back to top](#bbn_top)  

### <a name="each"></a>bbn.fn.each(arr, fn)

  __Executes the provided function on each element of the given array.__

  Returning false will stop the loop.

  * __arr__ _Array_ The array to loop on
  * __fn__ _Function_ The function, gets the array's element and the index as arguments

  __Returns__ _undefined_ 


```javascript
let res = 0;
bbn.fn.each([4, 5, 5, 10, 1, 2], d => {
  res += d;
});
// res = 27
```


```javascript
let res = 0;
bbn.fn.each([4, 5, 5, 10, 1, 2], d => {
  if (res >= 20) {
    return false;
  }
  res += d;
});
// res = 24
```
[Back to top](#bbn_top)  

### <a name="iterate"></a>bbn.fn.iterate(obj, fn, noPrivate)

  __Executes the provided function on each property of the given object.__

  * __obj__ _(Object|Number)_ The object to loop on
  * __fn__ _Function_ The function, gets the array's element and the index as arguments
  * __noPrivate__ _Boolean_ If set to true the _private_ properties won't be included

  __Returns__ _undefined_ 


```javascript
//["value1", 2]
let arr = [];
bbn.fn.iterate({field1: "value1", field2: 2}, (val, idx) => {
  arr.push(value);
});
```
[Back to top](#bbn_top)  

### <a name="clone"></a>bbn.fn.clone(obj)

  __Creates and returns a perfect clone - but different - from the given object.__

  * __obj__ _Object_ The source object

  __Returns__ _Object_ A new object


```javascript
let obj = {name: "Thomas"};
let objCopy = bbn.fn.clone(obj);
obj.name = "Julie";
// obj:     {name: "Julie"}
// objCopy: {name: "Thomas"}
```
[Back to top](#bbn_top)  

### <a name="map"></a>bbn.fn.map(arr, fn, deepProp, level)

  __Returns a new array generated by the execution of a function for each item of the given array.__

  The deepProp argument is the name of property which should contain a nested array on which
the function should also be applied recursively.

  * __arr__ _Array_ 
  * __fn__ _Function_ 
  * __deepProp__ _Boolean_ 
  * __level__ _Number_ 

  __Returns__ _Array_ 


```javascript
bbn.fn.map([1, 2, 3, 4], a => {
  return a + 1;
});
// [2, 3, 4, 5]
```


```javascript
bbn.fn.map(
  [{
    name: "tools",
    items: [
      {
         name: "hammers"
      }, {
         name: "screwdrivers",
         items: [
           {name: "flat screwdrivers"},
           {name: "slotted screwdrivers"},
           {name: "Hex screwdrivers"},
         ]
      }
    ]
  }, {
    name: "Kitchenware"
  }],
  d => {
    d.warranty = d.name === "Hex screwdrivers" ? "10 years" : "1 year";
    return d;
  },
  "items"
);
// [
//    {
//       name: "tools",
//       warranty: "1 year",
//       items: [
//         {
//            name: "hammers",
//            warranty: "1 year",
//         }, {
//            name: "screwdrivers",
//            warranty: "1 year",
//            items: [
//              {name: "flat screwdrivers", warranty: "1 year"},
//              {name: "slotted screwdrivers", warranty: "1 year"},
//              {name: "Hex screwdrivers", warranty: "10 year"},
//            ]
//         }
//       ]
//    }, {
//       name: "Kitchenware",
//       warranty: "1 year"
//    }
// ]
```
[Back to top](#bbn_top)  

### <a name="toCSV"></a>bbn.fn.toCSV(arr, [valSep=,], [rowSep=;], [valEsc="])

  __Returns a CSV string from the given array of arrays or objects.__

  * __arr__ _Array_ The array to convert
  * __[valSep=,]__ _String_ The value separator character
  * __[rowSep=;]__ _String_ The row separator character
  * __[valEsc="]__ _String_ The string escaper character

  __Returns__ _String_ A CSV string


```javascript
bbn.fn.toCSV([['a', 'b', 'c'], ['d', 'e', 'f']]);
// "a","b","c";
// "d","e","f"
```


```javascript
bbn.fn.toCSV([{name: "Capuche", fname: "Marc-Antoine"}, {name: "Orfin", fname: "Louis"}]);
// "Capuche","Marc-Antoine";
// "Orfin","Louis"
```
[Back to top](#bbn_top)  

### <a name="shortenObj"></a>bbn.fn.shortenObj(obj, [max=100])

  __Shortens all the strings contained in the object properties or element in a array.__

  Modifies directly the given object by cuttin all its too long strings, and adding ellipsis (...) in this case.

  * __obj__ _(Object|Array)_ 
  * __[max=100]__ _Number_ 

  __Returns__ _(Object|Array)_ The same object, modified


```javascript
bbn.fn.shortenObj({
  title: "Once upon a time in the west",
  synopsis: "There's a single piece of land around Flagstone with water on it, and rail baron Morton (Gabriele Ferzetti) aims to have it, knowing the new railroad will have to stop there. He sends his henchman Frank (Henry Fonda) to scare the land's owner, McBain (Frank Wolff), but Frank kills him instead and pins it on a known bandit, Cheyenne (Jason Robards). Meanwhile, a mysterious gunslinger with a score to settle (Charles Bronson) and McBain's new wife, Jill (Claudia Cardinale), arrive in town."
}, 50)
// {
//   "title": "Once upon a time in the west",
//   "synopsis": "There's a single piece of land around Flagstone wi..."
// }
```
[Back to top](#bbn_top)  